import{i as h,k as f,r as c,j as a,B as g}from"./index-f2c8bc83.js";import{u as x,M as t}from"./formik.esm-d0bdd94f.js";import{c as w,a as s}from"./index.esm-21b8556a.js";import{S as y,a as j}from"./StyledLink-431fea60.js";import{T as p,B as N}from"./Button-505ed133.js";import{L as v}from"./Logo-1d743ff1.js";import{u as C}from"./useMediaQuery-ca707d98.js";const S=w({firstName:s().required("To pole jest wymagane"),lastName:s().required("To pole jest wymagane"),email:s().email("Nieprawidłowy adres email").required("To pole jest wymagane"),password:s().required("To pole jest wymagane").min(8,"Min 8 znaków")}),T=()=>{const{register:o,isLoggedIn:l}=h(),i=f(),[n,m]=c.useState(!1),e=x({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:S,onSubmit:async d=>{m(!0),console.log("Submitting values:",d);try{const r=await o(d);r.success?(e.resetForm(),i("/")):console.error("Registration failed:",r.message)}catch(r){let u="An error occurred while registering: ";r instanceof Error&&(u=r.message),console.error(u)}finally{m(!1)}}});return c.useEffect(()=>{l&&i("/")},[l,i]),a.jsxs(y,{onSubmit:e.handleSubmit,children:[a.jsx(p,{component:"h1",variant:"h5",children:"Jesteś tu pierwszy raz?"}),a.jsx(t,{id:"firstName",name:"firstName",label:"Imię",type:"text",autoComplete:"on",variant:"standard",value:e.values.firstName,onChange:e.handleChange,error:e.touched.firstName&&!!e.errors.firstName,helperText:e.touched.firstName&&e.errors.firstName,fullWidth:!0}),a.jsx(t,{id:"lastName",name:"lastName",label:"Nazwisko",type:"text",autoComplete:"on",variant:"standard",value:e.values.lastName,onChange:e.handleChange,error:e.touched.lastName&&!!e.errors.lastName,helperText:e.touched.lastName&&e.errors.lastName,fullWidth:!0}),a.jsx(t,{id:"email",name:"email",label:"Email",type:"email",autoComplete:"on",variant:"standard",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,fullWidth:!0}),a.jsx(t,{id:"password",name:"password",label:"Hasło",type:"password",autoComplete:"new-password",variant:"standard",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,fullWidth:!0}),a.jsx(N,{variant:"contained",fullWidth:!0,type:"submit",disabled:n,children:n?"Rejestracja...":"Załóż konto"}),a.jsxs(p,{fontSize:"1rem",children:["Masz już konto? ",a.jsx(j,{to:"/login",children:"Zaloguj się"})]})]})},F=()=>{const o=C("(max-width:400px)");return a.jsxs(g,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",position:"relative"},children:[a.jsx("img",{src:v,alt:"OnTrack Logo",style:{width:"240px",position:"absolute",top:o?"25px":"50px"}}),a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:a.jsx(T,{})})]})};export{F as default};
