import{n as y,D as c,l as T}from"./index-6f106ed5.js";import{c as h}from"./ProjectStore-2ae7a3fd.js";var d={exports:{}},g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",m=g,R=m;function k(){}function u(){}u.resetWarningCache=k;var P=function(){function e(a,r,o,l,p,f){if(f!==R){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:u,resetWarningCache:k};return s.PropTypes=s,s};d.exports=P();var F=d.exports;const v=y(F),n="https://ontrackbackendapi.azurewebsites.net/api",S=h((e,t)=>({tasks:[],loading:!1,error:null,getTaskById:s=>t().tasks.find(a=>a.id===s),fetchTasks:async()=>{e({loading:!0,error:null});try{const s=await c.get(`${n}/task`);e({tasks:s.data,loading:!1}),console.log("Tasks fetched successfully")}catch(s){console.error("Failed to fetch tasks:",s),e({loading:!1,error:"Failed to fetch tasks"})}},fetchUserTasks:async()=>{e({loading:!0,error:null});try{const a=(await T.get(`${n}/user/me`)).data.taskIds;if(console.log("User Task IDs:",a),a&&a.length>0){const l=(await c.get(`${n}/task`)).data.filter(p=>a.includes(p.id));e({tasks:l,loading:!1}),console.log("User tasks fetched successfully:",l)}else e({tasks:[],loading:!1}),console.log("No tasks found for user.")}catch(s){console.error("Failed to fetch user tasks:",s),e({loading:!1,error:"Failed to fetch user tasks. Please try again later."})}},addTask:async s=>{try{const r=(await c.post(`${n}/task`,s)).data;e(o=>({tasks:[...o.tasks,r]}))}catch(a){console.error("Failed to add task:",a)}},updateTask:async(s,a)=>{try{await c.put(`${n}/task`,a),e(r=>({tasks:r.tasks.map(o=>o.id===s?{...o,...a}:o)}))}catch(r){console.error("Failed to update task:",r)}},deleteTask:async s=>{try{await c.delete(`${n}/task/${s}`),e(a=>({tasks:a.tasks.filter(r=>r.id!==s)}))}catch(a){console.error("Failed to delete task:",a)}}}));export{v as P,F as p,S as u};
