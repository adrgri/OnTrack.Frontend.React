import{i as h,k as f,r as u,j as a,B as g}from"./index-c4b9dc3b.js";import{c as x,a as s,u as w,M as t}from"./index.esm-d1478840.js";import{S as y,a as j}from"./StyledLink-ce57dc32.js";import{T as c,B as N}from"./Button-e9673a7d.js";import{L as v}from"./Logo-d60b6b7b.js";import{u as C}from"./useMediaQuery-4e9c83b5.js";const T=x({firstName:s().required("To pole jest wymagane"),lastName:s().required("To pole jest wymagane"),email:s().email("Nieprawidłowy adres email").required("To pole jest wymagane"),password:s().required("To pole jest wymagane").min(8,"Min 8 znaków")}),S=()=>{const{register:o,isLoggedIn:l}=h(),i=f(),[n,m]=u.useState(!1),e=w({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:T,onSubmit:async p=>{m(!0);try{const r=await o(p);r.success?(e.resetForm(),i("/")):console.error("Registration failed:",r.message)}catch(r){let d="An error occurred while registering: ";r instanceof Error&&(d=r.message),console.error(d)}finally{m(!1)}}});return u.useEffect(()=>{l&&i("/")},[l,i]),a.jsxs(y,{onSubmit:e.handleSubmit,children:[a.jsx(c,{component:"h1",variant:"h5",children:"Jesteś tu pierwszy raz?"}),a.jsx(t,{id:"firstName",name:"firstName",label:"Imię",type:"text",autoComplete:"on",variant:"standard",value:e.values.firstName,onChange:e.handleChange,error:e.touched.firstName&&!!e.errors.firstName,helperText:e.touched.firstName&&e.errors.firstName,fullWidth:!0}),a.jsx(t,{id:"lastName",name:"lastName",label:"Nazwisko",type:"text",autoComplete:"on",variant:"standard",value:e.values.lastName,onChange:e.handleChange,error:e.touched.lastName&&!!e.errors.lastName,helperText:e.touched.lastName&&e.errors.lastName,fullWidth:!0}),a.jsx(t,{id:"email",name:"email",label:"Email",type:"email",autoComplete:"on",variant:"standard",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,fullWidth:!0}),a.jsx(t,{id:"password",name:"password",label:"Hasło",type:"password",autoComplete:"new-password",variant:"standard",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,fullWidth:!0}),a.jsx(N,{variant:"contained",fullWidth:!0,type:"submit",disabled:n,children:n?"Rejestracja...":"Załóż konto"}),a.jsxs(c,{fontSize:"1rem",children:["Masz już konto? ",a.jsx(j,{to:"/login",children:"Zaloguj się"})]})]})},E=()=>{const o=C("(max-width:400px)");return a.jsxs(g,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",position:"relative"},children:[a.jsx("img",{src:v,alt:"OnTrack Logo",style:{width:"240px",position:"absolute",top:o?"25px":"50px"}}),a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:a.jsx(S,{})})]})};export{E as default};
