import{i as h,k as g,r as c,j as a,B as f}from"./index-166e65de.js";import{c as x,a as s,u as w,M as t}from"./index.esm-0288159c.js";import{S as y,a as j}from"./StyledLink-64db408c.js";import{T as p,B as N}from"./Button-893b62b5.js";import{L as v}from"./Logo-3ef40f16.js";import{u as C}from"./useMediaQuery-bdb7d64b.js";const S=x({firstName:s().required("To pole jest wymagane"),lastName:s().required("To pole jest wymagane"),email:s().email("Nieprawidłowy adres email").required("To pole jest wymagane"),password:s().required("To pole jest wymagane").min(8,"Min 8 znaków")}),T=()=>{const{register:o,isLoggedIn:l}=h(),i=g(),[n,m]=c.useState(!1),e=w({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:S,onSubmit:async d=>{m(!0),console.log("Submitting values:",d);try{const r=await o(d);r.success?(e.resetForm(),i("/")):console.error("Registration failed:",r.message)}catch(r){let u="An error occurred while registering: ";r instanceof Error&&(u=r.message),console.error(u)}finally{m(!1)}}});return c.useEffect(()=>{l&&i("/")},[l,i]),a.jsxs(y,{onSubmit:e.handleSubmit,children:[a.jsx(p,{component:"h1",variant:"h5",children:"Jesteś tu pierwszy raz?"}),a.jsx(t,{id:"firstName",name:"firstName",label:"Imię",type:"text",autoComplete:"on",variant:"standard",value:e.values.firstName,onChange:e.handleChange,error:e.touched.firstName&&!!e.errors.firstName,helperText:e.touched.firstName&&e.errors.firstName,fullWidth:!0}),a.jsx(t,{id:"lastName",name:"lastName",label:"Nazwisko",type:"text",autoComplete:"on",variant:"standard",value:e.values.lastName,onChange:e.handleChange,error:e.touched.lastName&&!!e.errors.lastName,helperText:e.touched.lastName&&e.errors.lastName,fullWidth:!0}),a.jsx(t,{id:"email",name:"email",label:"Email",type:"email",autoComplete:"on",variant:"standard",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&!!e.errors.email,helperText:e.touched.email&&e.errors.email,fullWidth:!0}),a.jsx(t,{id:"password",name:"password",label:"Hasło",type:"password",autoComplete:"new-password",variant:"standard",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password,fullWidth:!0}),a.jsx(N,{variant:"contained",fullWidth:!0,type:"submit",disabled:n,children:n?"Rejestracja...":"Załóż konto"}),a.jsxs(p,{fontSize:"1rem",children:["Masz już konto? ",a.jsx(j,{to:"/login",children:"Zaloguj się"})]})]})},E=()=>{const o=C("(max-width:400px)");return a.jsxs(f,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",position:"relative"},children:[a.jsx("img",{src:v,alt:"OnTrack Logo",style:{width:"240px",position:"absolute",top:o?"25px":"50px"}}),a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:a.jsx(T,{})})]})};export{E as default};
